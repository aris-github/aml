# AMLImporter

## Overview

An Eclipse based modular AutomationML Importer, including following modules:

* An Eclipse Ecore model of the 2.15 XML schema
* A Java implementation of the Ecore model (generated by EMF, extended by hand)
* An XML Parser for parsing AutomationML files
* An AML Importer for converting the parsed AML into Java objects w.r.t. the Ecore model
* A Protege plugin to expose the AML Importer interface to Protege

## Module Description

### AMLImporter

* In the folder *AMLImporter*, there is a **Maven project** (that can be built using `mvn install` or opened and built using Eclipse) called AMLImporter. All dependencies should be automatically downloaded from the central Maven repositories.
* *AMLImporter/model* contains the **Ecore model and genmodel** used to generate the Java class model.
  * It is possible to have Eclipse generate these models (the Ecore model and genmodel) from the XSD file; however, one must remove the "Revision" from the "Header" group to avoid circular definitions (Eclipse does not like those).
  * One can then add the "Revision" part manually again (to CAEXBasicObject) using the Eclipse Ecore editor. This is how the current Ecore model was created.
  * The current Ecore model also contains some modifications concerning AnyType objects - EMF does not handle these well by default, and so every object in the XSD of type "anyType" must be manually added and its type be set to "AnyType" (see for example "Additional Information" in the Ecore model).
* `edu.kit.aml.importer.AbstractXMLImporter` contains the common components (almost all of the actual import logic) used by both importers.
* `edu.kit.aml.importer.GenericXMLImporter` is an importer that generates the Java instance hierarchy using ["dynamic EMF"](http://www.heod.ru/0131425420_ch13lev1sec6.shtml) from an Ecore model (could be of anything, not just AML) given in the constructor. Its `doImport` method takes the name of an XML file conforming to the model.
* `edu.kit.aml.importer.AMLImporter` uses the generated Java classes to import the contents of an AML file and create Java instances. Its constructor takes the name of the Java package corresponding to the Ecore model (must be on the classpath). Its `doImport` method takes the name of an AML file.

### AMLImporter Protege plugin

* *protege/AMLImporterPlugin* contains a Maven project that depends on *AMLImporter* and builds a Protege plugin for the importer. It can be built using `mvn install` or opened and built using Eclipse. It should download all of its dependencies (except for AMLImporter) from the central Maven repository. Make sure you `mvn install` AMLImporter first (if maven doesn't build and install it automatically).
* `mvn install` packages the plugin as a jar and automatically copies it to $PROTEGE_HOME/plugins, where $PROTEGE_HOME is an environment variable that should point to the Protege installation directory. If the copying succeeds, the plugin should load automatically when Protege starts.
* The plugin adds a menu entry to the "Tools" menu. Clicking the entry should open a dialog prompting the user to select an AML file. The file is then imported; a dialog should open which indicates the result of the import.
